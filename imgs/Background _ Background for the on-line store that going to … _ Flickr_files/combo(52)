YUI.add("search-groups-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-groups-search"].run(t,this.appContext)}},attributes:{id:{},text:{setter:function(t){return e.AttributeHelpers.coerceString(t)}},subscriptionTypes:{setter:function(t){return e.AttributeHelpers.coerceString(t)}},userId:{setter:function(t){return e.AttributeHelpers.coerceString(t)}},groups:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-groups-search"],listItemIdField:"id"}},filterInactiveGroups:{setter:function(t){return e.AttributeHelpers.coerceString(t)}},sort:{setter:function(t){return e.AttributeHelpers.coerceString(t)}},page:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},pages:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},perPage:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},totalItems:{setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},apiParams:{},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["attribute-helpers","flickr-model-registry","flickr-groups-search-fetcher","search-helper"]});YUI.add("search-group-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{join:function(t,r){return e.ModelCreators["flickr-groups-join"].run(t,r)},leave:function(t,r){return e.ModelDeletors["flickr-groups-leave"].run(t,r)}},join:function(e){return this.setValue(e,"isMember",!0),this},leave:function(e){return this.setValue(e,"isAdmin",!1),this.setValue(e,"isModerator",!1),this.setValue(e,"isMember",!1),this.setValue(e,"hasPendingRequestToJoin",!1),this},parseGroupModel:function(t,r,n){var i,o;if(i={id:n.id||t||n.nsid,pathAlias:n.pathAlias||r||n.pathalias,title:n.title,isModerator:n.is_moderator||n.moderator||n.isModerator,invitationOnly:n.invitationOnly,secureRules:n.secureRules,hasPendingRequestToJoin:n.hasPendingRequestToJoin,isInvited:n.isInvited,isMember:n.is_member||n.member||n.isMember,isAdmin:n.is_admin||n.admin||n.isAdmin,memberCount:n.memberCount,poolCount:n.photos,topicCount:"string"===n.topicCount?n.topicCount:void 0,latestPhotoActivity:e.moment(e.moment(n.date_activity_detail?n.date_activity_detail.pool:void 0,"X")._d),latestDiscussionActivity:e.moment(e.moment(n.date_activity_detail?n.date_activity_detail.discussions:void 0,"X")._d),eighteenplus:n.eighteenplus,iconurls:e.APIHelper.response.removeProtocolFromURL(n.iconurls)},"string"==typeof n.datecreate?o=n.datecreate:n.datecreate&&"string"==typeof n.datecreate.content&&(o=n.datecreate.content),o?(o+=" +0700",i.dateCreated=e.moment(o,"YYYY-MM-DD HH:mm:ss Z")):i.dateCreated=new e.moment,!i.title&&n.name&&(i.title="string"==typeof n.name?n.name:n.name.content),!i.memberCount&&n.members&&(i.memberCount="string"!=typeof n.members?n.members.content:n.members),!i.poolCount&&n.poolCount&&(i.poolCount="string"!=typeof n.poolCount?n.poolCount.content:n.poolCount),i.topicCount||(n.topicCount?i.topicCount="string"!=typeof n.topicCount?n.topicCount.content:n.topicCount:i.topicCount=0),n.privacy&&(parseInt(n.privacy,10)?i.privacy=parseInt(n.privacy,10):n.privacy.content&&(i.privacy=n.privacy.content)),n.coverphotoUrl){var u=n.coverphotoUrl.s;"http:"===u.slice(0,5)&&(u=u.replace("http:","https:")),i.coverPhotoUrl=u}return i},attributes:{pathAlias:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||void 0},defaultFn:function(e){return e}},title:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},invitationOnly:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},secureRules:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},hasPendingRequestToJoin:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isInvited:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isAdmin:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isModerator:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isMember:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},memberCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},poolCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},topicCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},dateCreated:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},latestPhotoActivity:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},latestDiscussionActivity:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},eighteenplus:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},privacy:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},iconurls:{},bestIconURL:{readOnly:!0,derivedBy:["iconurls"],defaultFn:function(t){var r=e.URLHelper.getGroupIconURL(this.getValue(t,"iconurls"));return r||void 0}},url:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return"/groups/"+(this.getValue(e,"pathAlias")||e)+"/"}},urlMembersPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"members"}},urlPoolPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"pool"}},urlDiscussionPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"discuss"}},latestGroupActivity:{readOnly:!0,derivedBy:["latestPhotoActivity","latestDiscussionActivity","dateCreated"],defaultFn:function(t){var r=this.getValue(t,"latestDiscussionActivity"),n=this.getValue(t,"latestPhotoActivity"),i=this.getValue(t,"dateCreated");return r.isValid()&&(i=e.moment.min(i,r)),n.isValid()&&(i=e.moment.min(i,n)),i}},coverPhotoUrl:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","api-helper","url-helper","moment","flickr-groups-getInfo-fetcher","attribute-helpers"]});